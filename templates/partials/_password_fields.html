<!-- Password with toggle -->
<div class="mb-3">
  <label for="id_password1" class="form-label">Password</label>
  <div class="input-group">
    {{ form.password1 }}
    <button type="button" class="btn btn-outline-secondary toggle-password" data-target="id_password1">
      <i class="bi bi-eye"></i>
    </button>
  </div>
  <div class="form-text text-muted">Must be strong and secure.</div>
  <div class="invalid-feedback d-block">{{ form.password1.errors }}</div>

  <div id="password-rules-wrapper" class="overflow-hidden" style="max-height: 0; transition: max-height 0.4s ease;">
    <ul class="list-unstyled small mt-2" id="password-rules">
      <li id="rule-length" class="text-danger">❌ At least 8 characters</li>
      <li id="rule-uppercase" class="text-danger">❌ One uppercase letter</li>
      <li id="rule-lowercase" class="text-danger">❌ One lowercase letter</li>
      <li id="rule-number" class="text-danger">❌ One number</li>
      <li id="rule-symbol" class="text-danger">❌ One special character</li>
    </ul>
  </div>
</div>

<!-- Confirm Password -->
<div class="mb-3">
  <label for="id_password2" class="form-label">Confirm Password</label>
  <div class="input-group">
    {{ form.password2 }}
    <button type="button" class="btn btn-outline-secondary toggle-password" data-target="id_password2">
      <i class="bi bi-eye"></i>
    </button>
  </div>
  <div id="password-match-feedback" class="small mt-1 text-muted"></div>
  <div class="invalid-feedback d-block">{{ form.password2.errors }}</div>
</div>
